[[extend 'layout.html']]

<head>

</head>

<div class="section has-background-grey-lighter">
  <style>
    [v-cloak] {display: none;}
  </style>

<!-- Filter functions on the right part -->
<div class="section" id="vue-target" v-cloak>
  <!-- Start of filter functions -->
  <div class="control block">
    <div class="columns block is-mobile ">
      <!-- TODO having problem that if the number of results increase the length of this column also increase -->
      <div class="column is-one-fifth has-background-white">
        <b>Select A Car Make</b>
    <select v-model="selected" name="selected" @change="filter">
      <option disabled value="">Select A Car Make</option>
      [[for r in res:]]
      <option>[[=r]]</option>
      [[pass]]
    </select>
    <br/>
    <b>Type A Car Model</b>
      <input class="input" type="text" v-model="car_model" @keyup="filter"/>
    <br/>
    <b>Year</b>
      <input class="input" type="number"  v-model="min_year"@keyup="filter"/>
        <div> to </div>
           <input class="input" type="number" v-model="max_year" @keyup="filter"/>
    <br/>
    <b>Price</b>
      <input class="input" type="number" v-model="min_price" @keyup="filter"/>
        <div>to</div>
          <input class="input" type="number" v-model="max_price" @keyup="filter"/>
    <br/>
    <b>Mileage</b>
      <input class="input" type="number" v-model="min_mil" @keyup="filter"/>
        <div>to</div>
          <input class="input" type="number" v-model="max_mil" @keyup="filter"/>
      </div>
      <!-- End of filter functions -->

      <!-- Display filter results on the right part -->
      <div class="column is-four-fifth">
        <div v-for="y in results">

          <!-- Card buttons to detail description page -->
<!--          <a href="[[=URL('car_description_page')]]">-->

            <div class="card">
              <div class="card-content">
                  <b class="is-size-4 is-italic"> {{y.car_year}} {{y.car_brand}} {{y.car_model}} </b>
              </div>

            <div class="card-image">
              <div class="column">
              <div class="columns block is-mobile">
                <div class="column is-three-fifth">
                    <figure class="image">
                        <img src="https://i.ytimg.com/vi/bUVB0eB9d6Q/maxresdefault.jpg" alt="Placeholder image">
                    </figure>
                </div>

                <div class="column is-two-fifth">
                  <div class="card-content">
                    <div class="content">
                      <div class="block"><b> Price: </b>${{y.car_price}}</div>
                      <div class="block"><b>Mileage: </b> {{y.car_mileage}}</div>
                    </div>
                  </div>
                </div>
              </div>
              </div>
            </div>
              <!-- add bookmark button -->
              <!-- TODO change it to BookMark to sign in user -->
              <footer class="card-footer">
                <p class="card-footer-item">
                  <a href="[[=URL('car_description_page')]]" class="card-footer-item has-text-grey">MoreDetail</a>
                  <a href="[[=URL('my_bookmarks')]]" class="card-footer-item has-text-grey">BookMark</a>
                </p>
              </footer>
        </div>
<!--            </a>-->
        <!-- Start a new space for every car in every loop -->
          <br>
      </div>

    </div>
  </div>
</div>


[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>

  let filter_url = "[[=XML(filter_url)]]";
</script>
<script src="js/index.js"></script>
[[end]]

</div>
</div>
