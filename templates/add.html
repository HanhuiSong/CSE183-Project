[[extend 'auth_layout.html']]

<div class="section" id="vue-target-cars">
    <div v-if="display > 1">
        <div class="title">Insert a Car</div>
        <div class="form">
            <div class="field">
                <label class="label">Brand</label>
                <div class="control">
                    <input type="text" v-model="add_car_brand" class="input">
                </div>
            </div>
            <div class="field">
                <label class="label">Model</label>
                <div class="control">
                    <input type="text" v-model="add_car_model" class="input">
                </div>
            </div>
            <div class="field">
                <label class="label">Year</label>
                <div class="control">
                    <input type="text" v-model="add_car_year" class="input">
                </div>
            </div>
            <div class="field">
                <label class="label">Price</label>
                <div class="control">
                    <input type="text" v-model="add_car_price" class="input">
                </div>
            </div>
            <div class="field">
                <label class="label">Mileage</label>
                <div class="control">
                    <input type="text" v-model="add_car_mileage" class="input">
                </div>
            </div>
            <div class="field">
                <label class="label">Description</label>
                <div class="control">
                    <input type="text" v-model="add_car_description" class="input">
                </div>
            </div>
            <div class="field">
                <label class="label">Zip code</label>
                <div class="control">
                    <input type="text" v-model="add_car_city" class="input">
                </div>
            </div>
            <div class="field">
                <div class="control">
                    <a class="button is-success" @click="add_car">
                        <span class="icon"><i class="fa fa-plus"></i></span>
                        <span>Add</span>
                    </a>
                    <!-- <input  value="Add" class="button is-primary" href="[[=URL('upload_image')]]"> -->
                </div>
            </div>
            <!-- <a class="button is-success" href="[[=URL('upload_image')]]">
              <span class="icon"><i class="fa fa-plus"></i></span>
              <span>Add</span>
            </a> -->
        </div>
    </div>
    <div class="section" v-else-if="display > 0">
        <table class="table is-striped is-fullwidth">
            <tr>
                <!--        <th>Id</th>-->
                <th>Brand</th>
                <th>Model</th>
                <th>Year</th>
                <th>Price</th>
                <th>Mileage</th>
                <th>Description</th>
                <th>Picture</th>
                <!-- <th>City</th> -->
                <th>Zip Code</th>
                <th>Created By</th>
                <th>Creation Date</th>
                <th></th>
                <th></th>
            </tr>
            <tr v-for="c in cars" :key="c.id">
                <!--        <td>{{c.id}}</td>-->
                <td>{{c.car_brand}}</td>
                <td>{{c.car_model}}</td>
                <td>{{c.car_year}}</td>
                <td>{{c.car_price}}</td>
                <td>{{c.car_mileage}}</td>
                <td>{{c.car_description}}</td>
                <td>
                  <div class="field has-addons">
                    <p class="control">
                      <!-- <label class="label">Picture: </label> -->
                        <div class="control">
                        <div class="file is-info">
                          <label class="file-label">
                            <input class="file-input" type="file" @change="upload_file($event, c._idx)">
                            <span class="file-cta">
                              <span class="file-icon">
                                <i v-if="uploading" class="fa fa-spinner fa-pulse fa-fw"></i>
                                <i v-else class="fa fa-upload fa-fw"></i>
                              </span>
                              <span class="file-label">
                                <span v-if="!uploading">Upload new file</span>
                              </span>
                            </span> 
                          </label>
                        </div>
                      </div>
                    </p>
                  </div> 
                </td>
                <!-- <td>{{c.car_city}}</td> -->
                <td>{{c.car_zip}}</td>
                <td>{{c.car_picture}}</td>
            </tr>
        </table>
        <article class="message is-warning">
            <div class="message-header">
                <p>Note</p>
            </div>
            <div class="message-body">
                Please upload a picture no larger than <strong>5 MB</strong>. Thank you!
            </div>
        </article>
    </div>

    <div v-else>
        <article class="message is-warning">
            <div class="message-header">
                <p>Notification</p>
            </div>
            <div class="message-body">
                You have successfully added your vehicles! : )
            </div>
        </article>
        <a class="button is-success" href="[[=URL('second_page')]]">
            <span class="icon"><i class="fa fa-backward"></i></span>
            <span>Back</span>
        </a>
    </div>
</div>

[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
    let add_car_url = "[[=XML(add_car_url)]]";
    let file_info_url = "[[=XML(file_info_url)]]";
    let obtain_gcs_url = "[[=XML(obtain_gcs_url)]]";
    let notify_url = "[[=XML(notify_url)]]";
    let delete_url = "[[=XML(delete_url)]]";
</script>
<script src="js/cars.js"></script>

[[end]]